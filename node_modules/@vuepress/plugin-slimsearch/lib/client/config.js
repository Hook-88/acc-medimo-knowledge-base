import{useData as U,useSiteLocale as j,defineClientConfig as R}from"vuepress/client";import{isMobile as $,startsWith as F,useLocale as g,useKeys as G,isMacOS as W,isIOS as Y}from"@vuepress/helper/client";import{ref as h,computed as f,watch as A,onMounted as w,onUnmounted as O,defineComponent as E,h as a,shallowRef as M,defineAsyncComponent as q}from"vue";import{u as x,c as B,l as k,o as b,i as P}from"./index-CSn1g7ic.js";import{c as H,C as Q,S as z}from"./icons-DxmX1gti.js";import"./styles/search-box.css";import{useToggle as J,useSupported as V,watchImmediate as K,useScrollLock as X,useEventListener as Z,onClickOutside as ee,useDebounceFn as ae}from"@vueuse/core";import"./styles/search-modal.css";import"vuepress/shared";let le=null;const N=()=>le??=J(),se=(e,r=!1)=>{const s=h(0),n=f(()=>e.value[s.value]),i=()=>{s.value=s.value>0?s.value-1:e.value.length-1},t=()=>{s.value=s.value<e.value.length-1?s.value+1:0};return A(e,()=>{r||(s.value=0)}),{index:s,item:n,prev:i,next:t}},te=()=>{const e=V(()=>typeof window<"u"&&"userAgent"in window.navigator);return f(()=>e.value&&$())},re=/[\u4e00-\u9fff\u3400-\u4dbf\u3040-\u309f\u30a0-\u30ff\uac00-\ud7af]/,oe=(e="")=>e.split(/\s+/).map(r=>{if(r.length>3){const s=r.split("");if(s.every(n=>re.test(n)))return s}return r}).flat(),ne=e=>{const r=h([]);if(__SLIMSEARCH_SUGGESTION__){const{page:s,routeLocale:n}=U(),i=x();w(()=>{const{suggest:t,terminate:c}=B(),y=u=>{const{resultsFilter:v,querySplitter:p,suggestionsFilter:C=o=>o,...S}=i.value;u.length>=3?t(u,n.value,S).then(o=>C(o,u,n.value,s.value)).then(o=>{r.value=o.length?F(o[0],u)&&!o[0].slice(u.length).includes(" ")?o:[u,...o]:[]}).catch(o=>{console.error(o)}):r.value=[]};K([e,n],([u])=>{y(u.join(" "))}),O(()=>{c()})})}return{enabled:__SLIMSEARCH_SUGGESTION__,suggestions:r}},ue='<svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg>',ie='<svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg>',ce='<svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg>',ve='<svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg>',_=b.hotKeys[0];var he=E({name:"SearchBox",setup(){const e=g(k),[r,s]=N(),n=h(!1);G(b.hotKeys,()=>{r.value||s()});const i=f(()=>_?[...(n.value?["⌃","⇧","⌥","⌘"]:["Ctrl","Shift","Alt","Win"]).filter((t,c)=>_[["ctrl","shift","alt","meta"][c]]),_.key.toUpperCase()]:null);return w(()=>{n.value=W()||Y()}),()=>[a("button",{type:"button",class:"slimsearch-button","aria-label":e.value.search,onClick:()=>{s(!0)}},[a(H),a("div",{class:"slimsearch-placeholder"},e.value.search),i.value?a("div",{class:"slimsearch-key-hints"},i.value.map(t=>a("kbd",{class:"slimsearch-key"},t))):null])]}}),pe=E({name:"SearchKeyHints",setup(){const e=g(k),r=te();return()=>r.value?null:a("div",{class:"slimsearch-hints"},[a("span",{class:"slimsearch-hint"},[a("kbd",{innerHTML:ue}),e.value.select]),a("span",{class:"slimsearch-hint"},[a("kbd",{innerHTML:ce}),a("kbd",{innerHTML:ie}),e.value.navigate]),a("span",{class:"slimsearch-hint"},[a("kbd",{innerHTML:ve}),e.value.exit])])}});const de=q({loader:()=>import("./components/SearchResult.js"),loadingComponent:()=>{const e=g(k);return a(z,{class:"slimsearch-result-wrapper",hint:e.value.loading})}}),me=["ArrowDown","ArrowUp","Escape","Tab","Enter"];var ge=E({name:"SearchModal",setup(){const e=g(k),r=j(),s=x(),[n,i]=N(),t=h(""),c=h([]),{enabled:y,suggestions:u}=ne(c),v=h(!1),{index:p,prev:C,next:S}=se(u),o=M(),L=M(),I=M(),D=X(I.value),d=f(()=>y&&v.value&&u.value.length),T=(l=p.value)=>{t.value=u.value[l],v.value=!1};return Z("keydown",l=>{d.value?l.key==="ArrowUp"?C():l.key==="ArrowDown"?S():l.key==="Tab"?T():(l.key==="Enter"||l.key==="Escape")&&(v.value=!1):l.key==="Escape"&&i(!1)},{passive:!0}),ee(L,()=>{v.value=!1}),K(t,ae(()=>(s.value.querySplitter?.(t.value)??Promise.resolve(oe(t.value))).then(l=>{c.value=l.filter(m=>m.length)}),Math.min(b.searchDelay,b.suggestDelay))),w(()=>{I.value=document.body,A(n,l=>{l&&o.value?.focus()},{flush:"post"})}),O(()=>{D.value=!1}),()=>n.value?a("div",{class:"slimsearch-modal-wrapper"},[a("div",{class:"slimsearch-mask",onClick:()=>{i(!1),t.value=""}}),a("div",{class:"slimsearch-modal"},[a("div",{class:"slimsearch-box"},[a("form",[a("label",{id:"slimsearch-label",for:"slimsearch-input","aria-label":e.value.search},a(H)),a("input",{ref:o,type:"search",class:"slimsearch-input",id:"slimsearch-input",placeholder:e.value.placeholder,spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",name:`${r.value.title}-search`,value:t.value,"aria-controls":"slimsearch-results",onKeydown:l=>{d.value&&me.includes(l.key)&&l.preventDefault()},onInput:({target:l})=>{t.value=l.value,v.value=!0,p.value=0}}),t.value?a("button",{type:"reset",class:"slimsearch-clear-button",title:e.value.clear,"aria-label":e.value.clear,innerHTML:Q,onClick:()=>{t.value=""}}):null,d.value?a("ul",{class:"slimsearch-suggestions",ref:L},u.value.map((l,m)=>a("li",{class:["slimsearch-suggestion",{active:m===p.value}],onClick:()=>{T(m)}},[a("kbd",{class:"slimsearch-auto-complete",title:`Tab ${e.value.autocomplete}`},"Tab"),l]))):null]),a("button",{type:"button",class:"slimsearch-close-button",onClick:()=>{i(!1),t.value=""}},e.value.cancel)]),a(de,{queries:c.value,isFocusing:!d.value,onClose:()=>{i(!1)},onUpdateQuery:l=>{t.value=l}}),a(pe)])]):null}}),fe=R({enhance({app:e}){P(e),e.component("SearchBox",he)},rootComponents:[ge]});export{fe as default};
//# sourceMappingURL=config.js.map
